---
name: usePromise
---

import { Playground } from 'docz';
import { useState, useEffect } from 'react';
import { useDebounce } from 'use-lodash-debounce-throttle';
import { usePromise } from '../src';

# usePromise

## API
```ts
function usePromise<Result = any>(promise: Promise<Result> | (() => Promise<Result>), deps?: any[]): ["pending" | "resolved" | "rejected", Result | undefined, Error];
```

## Usage

```js
import React from 'react';
import { usePromise } from '@qunhe/react-hooks-collection';

function Example() {
  const [state, result, error] = usePromise(
    () => new Promise(resolve => {
      setTimeout(() => resolve('foo'), 2000);
    }),
    []
  );

  return (
    <div>
      <p>{state}</p>
      <p>{result || error}</p>
    </div>
  );
}
```

## example

<Playground>
  {() => {
    const [fetchTimes, updateFetchTimes] = useState(0);
    const [state, result = 'bar', error] = usePromise(
      () => new Promise(resolve => {
        setTimeout(() => resolve('foo'), 2000);
      }),
      [fetchTimes]
    );

    return (
      <div>
        <p>{state}</p>
        <p>{result || error}</p>
        <button onClick={() => updateFetchTimes(fetchTimes + 1)}>update promise</button>
      </div>
    );
  }}
</Playground>